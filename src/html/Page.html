<!DOCTYPE html>
<html>
    <head>
        <base target="_top">
        <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
        <!-- The CSS package above applies Google styling to buttons and other elements. -->
        <style>
            .branding-below {
              bottom: 56px;
              top: 0;
            }
            .branding-text {
              left: 7px;
              position: relative;
              top: 3px;
            }
            .col-contain {
              overflow: hidden;
            }
            .col-one {
              float: left;
              width: 50%;
            }
            .logo {
              vertical-align: middle;
            }
            .radio-spacer {
              height: 20px;
            }
            .width-100 {
              width: 100%;
            }
        </style>
    </head>
  <body>
      <div class="inline form-group">
        <label for="pubid">Sensorbot public id</label>
        <input name="publicId" type="text" id="pubid" style="width: 150px;">
        <label for="deviceid">Device id</label>
        <input name="deviceId" type="text" id="deviceid" style="width: 150px;">
      </div>
      <div class="block" id="button-bar">
        <button class="secondary" id="cancelbutton" onclick="google.script.host.close()">Cancel</button>
        <button class="action" id="submitbutton" disabled>Insert data</button>
      </div>
  </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      $( "#pubid" ).click(function() {
        var pubId = $("#pubid").val();
        var deviceId = $("#deviceid").val();        
        if (!!pubid && !!deviceId) {
          $( "#submitbutton" ).prop("disabled",false);
        }
      });
      $( "#deviceid" ).click(function() {
        var pubId = $("#pubid").val();
        var deviceId = $("#deviceid").val();        
        if (!!pubid && !!deviceId) {
          $( "#submitbutton" ).prop("disabled",false);
        }
      });
      
      $( "#submitbutton" ).click(function(event) {
        var pubId = $("#pubid").val();
        var deviceId = $("#deviceid").val();
        if (!!pubId === false || !!deviceId === false) {
          alert("Please enter a valid sensorbot public id");
        } else {
          //google.script.run.setPubIdPlusInsertData(pubId);
          google.script.run.configureSettingsPlusInsertData({publicId: pubId, deviceId: deviceId});
          google.script.host.close();
        }
      });
      $( "#cancelbutton" ).click(function() {
          google.script.host.close();
      });
    </script>

</html>
